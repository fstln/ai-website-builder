{% comment %}
  Icon Snippet
  Usage: {% render 'icon', name: 'arrow-right', class: 'w-4 h-4' %}
  - Accepts shorthand names ("cart", "user" â€¦) and maps them to Remix Icon classes.
  - Passing a direct Remix Icon class (e.g., "ri-smartphone-line") renders it as-is.
{% endcomment %}

{% assign icon_class = class | default: '' %}
{% assign requested_icon = name | default: '' %}
{% assign remix_icon = '' %}

{% if requested_icon contains 'ri-' %}
  {% assign remix_icon = requested_icon %}
{% else %}
  {% case requested_icon %}
    {% when 'user', 'account', 'user-outline' %}
      {% assign remix_icon = 'ri-user-3-line' %}
    {% when 'shopping-cart', 'cart', 'cart-outline' %}
      {% assign remix_icon = 'ri-shopping-cart-line' %}
    {% when 'menu' %}
      {% assign remix_icon = 'ri-menu-line' %}
    {% when 'close' %}
      {% assign remix_icon = 'ri-close-line' %}
    {% when 'search' %}
      {% assign remix_icon = 'ri-search-line' %}
    {% when 'arrow-right' %}
      {% assign remix_icon = 'ri-arrow-right-line' %}
    {% when 'arrow-left' %}
      {% assign remix_icon = 'ri-arrow-left-line' %}
    {% when 'arrow-right-long', 'send' %}
      {% assign remix_icon = 'ri-send-plane-line' %}
    {% when 'chevron-down' %}
      {% assign remix_icon = 'ri-arrow-down-s-line' %}
    {% when 'mail', 'email' %}
      {% assign remix_icon = 'ri-mail-line' %}
    {% when 'document' %}
      {% assign remix_icon = 'ri-file-text-line' %}
    {% when 'comment', 'chat' %}
      {% assign remix_icon = 'ri-chat-3-line' %}
    {% when 'minus' %}
      {% assign remix_icon = 'ri-subtract-line' %}
    {% when 'plus' %}
      {% assign remix_icon = 'ri-add-line' %}
    {% when 'play' %}
      {% assign remix_icon = 'ri-play-fill' %}
    {% when 'check', 'success' %}
      {% assign remix_icon = 'ri-check-line' %}
    {% when 'bag', 'shopping-bag' %}
      {% assign remix_icon = 'ri-shopping-bag-line' %}
    {% when 'free-shipping' %}
      {% assign remix_icon = 'ri-truck-line' %}
    {% when 'refresh-cw', 'refresh', 'rotate-cw' %}
      {% assign remix_icon = 'ri-refresh-line' %}
    {% when 'tag', 'discount' %}
      {% assign remix_icon = 'ri-price-tag-3-line' %}
    {% when 'package', 'shipping', 'box' %}
      {% assign remix_icon = 'ri-box-3-line' %}
    {% when 'shield', 'shield-check', 'warranty', 'security' %}
      {% assign remix_icon = 'ri-shield-check-line' %}
    {% when 'star' %}
      {% assign remix_icon = 'ri-star-fill' %}
    {% when 'instagram', 'ins' %}
      {% assign remix_icon = 'ri-instagram-line' %}
    {% when 'facebook' %}
      {% assign remix_icon = 'ri-facebook-fill' %}
    {% when 'twitter', 'x' %}
      {% assign remix_icon = 'ri-twitter-line' %}
    {% when 'youtube' %}
      {% assign remix_icon = 'ri-youtube-fill' %}
    {% when 'tiktok' %}
      {% assign remix_icon = 'ri-tiktok-fill' %}
    {% when 'placeholder' %}
      {% assign remix_icon = 'ri-image-line' %}
    {% else %}
      {% assign remix_icon = '' %}
  {% endcase %}
{% endif %}

{% if remix_icon == blank %}
  {% assign remix_icon = 'ri-question-line' %}
{% endif %}

{% assign icon_font_size_px = '' %}
{% assign width_candidate = '' %}
{% assign height_candidate = '' %}
{% assign normalized_classes = icon_class | strip | replace: '
', ' ' %}
{% assign class_tokens = normalized_classes | split: ' ' %}

{% for token in class_tokens %}
  {% assign token_clean = token | strip %}
  {% if token_clean != '' %}
    {% if width_candidate == '' %}
      {% assign token_prefix = token_clean | slice: 0, 2 %}
      {% if token_prefix == 'w-' %}
        {% assign candidate = token_clean | remove_first: 'w-' %}
        {% unless candidate contains '/' or candidate contains '[' or candidate == 'full' or candidate == 'auto' or candidate == 'screen' or candidate == 'min' or candidate == 'max' or candidate == 'fit' %}
          {% assign width_candidate = candidate %}
        {% endunless %}
      {% endif %}
    {% endif %}

    {% if height_candidate == '' %}
      {% assign token_prefix = token_clean | slice: 0, 2 %}
      {% if token_prefix == 'h-' %}
        {% assign candidate = token_clean | remove_first: 'h-' %}
        {% unless candidate contains '/' or candidate contains '[' or candidate == 'full' or candidate == 'auto' or candidate == 'screen' or candidate == 'min' or candidate == 'max' or candidate == 'fit' %}
          {% assign height_candidate = candidate %}
        {% endunless %}
      {% endif %}
    {% endif %}
  {% endif %}
{% endfor %}

{% assign size_source = width_candidate %}
{% if size_source == '' and height_candidate != '' %}
  {% assign size_source = height_candidate %}
{% endif %}

{% if size_source != '' %}
  {% assign size_numeric = size_source | plus: 0 %}
  {% assign icon_font_size_px = size_numeric | times: 4 %}
{% endif %}

{% capture icon_style %}
line-height: 1;
{% if icon_font_size_px != '' %}
  font-size: {{ icon_font_size_px }}px;
{% endif %}
{% endcapture %}

<i class="ri {{ remix_icon }}{% if icon_class != '' %} {{ icon_class }}{% endif %}" style="{{ icon_style | strip }}" aria-hidden="true"></i>
