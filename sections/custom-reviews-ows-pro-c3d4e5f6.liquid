{%- comment -%}
  This section provides social proof to build trust and address user consideration.
  - PM: Focused on showcasing authentic user feedback to eliminate doubts.
  - Designer: Designed clean, card-based layout for testimonials.
  - Architect: Built with a flexible `blocks` schema for dynamic review management.
{%- endcomment -%}

{%- liquid
  assign fallback_section_id = 'custom-reviews-ows-pro-c3d4e5f6-' | append: section.index
  assign section_id = section.settings.section_id | default: fallback_section_id
-%}

<section id="{{ section_id | escape }}" class="color-scheme color-{{ section.settings.color_scheme }} bg-background py-16 sm:py-20 lg:py-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-2xl lg:text-center">
      <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl font-heading">
        {{ section.settings.heading }}
      </h2>
      <p class="mt-6 text-lg leading-8 text-muted">
        {{ section.settings.subheading }}
      </p>
    </div>
    <div class="mx-auto mt-16 flow-root sm:mt-20 lg:mt-24">
      <div class="-mt-8 sm:-mx-4 sm:text-left sm:mt-0">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          {%- if section.blocks.size > 0 -%}
            {%- for block in section.blocks -%}
              <div class="bg-surface rounded-2xl shadow-sm p-8" {{ block.shopify_attributes }}>
                <div class="flex items-center gap-x-4">
                  <div class="text-sm leading-6">
                    <p class="font-semibold text-foreground">{{ block.settings.author }}</p>
                    <div class="flex items-center mt-1">
                      {%- for i in (1..5) -%}
                        <svg class="h-5 w-5 flex-shrink-0 {% if i <= block.settings.rating %}text-yellow-400{% else %}text-gray-300{% endif %}" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                          <path fill-rule="evenodd" d="M10.868 2.884c.321-.662 1.215-.662 1.536 0l1.881 3.861 4.254.617c.732.106 1.022.992.494 1.505l-3.078 2.999.727 4.237c.124.728-.64 1.285-1.28.944l-3.803-2.001-3.803 2.001c-.64.34-1.404-.216-1.28-.944l.727-4.237-3.078-2.999c-.528-.513-.238-1.399.494-1.505l4.254-.617 1.881-3.861z" clip-rule="evenodd" />
                        </svg>
                      {%- endfor -%}
                    </div>
                  </div>
                </div>
                <blockquote class="mt-6 text-foreground">
                  <p>{{ block.settings.quote }}</p>
                </blockquote>
              </div>
            {%- endfor -%}
          {%- else -%}
            {%- for i in (1..3) -%}
               <div class="bg-surface rounded-2xl shadow-sm p-8">
                <div class="flex items-center gap-x-4">
                  <div class="text-sm leading-6">
                    <p class="font-semibold text-foreground">Placeholder Author {{ i }}</p>
                    <div class="flex items-center mt-1">
                      {%- for j in (1..5) -%}
                        <svg class="h-5 w-5 flex-shrink-0 {% if j <= 5 %}text-yellow-400{% else %}text-gray-300{% endif %}" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                          <path fill-rule="evenodd" d="M10.868 2.884c.321-.662 1.215-.662 1.536 0l1.881 3.861 4.254.617c.732.106 1.022.992.494 1.505l-3.078 2.999.727 4.237c.124.728-.64 1.285-1.28.944l-3.803-2.001-3.803 2.001c-.64.34-1.404-.216-1.28-.944l.727-4.237-3.078-2.999c-.528-.513-.238-1.399.494-1.505l4.254-.617 1.881-3.861z" clip-rule="evenodd" />
                        </svg>
                      {%- endfor -%}
                    </div>
                  </div>
                </div>
                <blockquote class="mt-6 text-foreground">
                  <p>This is a placeholder review. The comfort is unparalleled, and the open-ear design is a game-changer for my runs.</p>
                </blockquote>
              </div>
            {%- endfor -%}
          {%- endif -%}
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Custom: Reviews (OWS Pro)",
  "tag": "section",
  "class": "custom-reviews-ows-pro-section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-2"
    },
    {
      "type": "text",
      "id": "section_id",
      "label": "Section ID",
      "default": "",
      "info": "Used for anchor links. Defaults to custom-reviews-ows-pro-c3d4e5f6-{index} when left blank."
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Don't just take our word for it"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "See what our customers are saying about the Oladance OWS Pro."
    }
  ],
  "blocks": [
    {
      "type": "review",
      "name": "Review",
      "settings": [
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Rating",
          "default": 5
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author",
          "default": "Alex Johnson"
        },
        {
          "type": "richtext",
          "id": "quote",
          "label": "Quote",
          "default": "<p>The sound quality is incredible, especially the bass. I can wear them all day without any discomfort. Highly recommended!</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom: Reviews (OWS Pro)",
      "blocks": [
        {
          "type": "review"
        },
        {
          "type": "review",
          "settings": {
            "author": "Samantha Lee",
            "quote": "<p>Finally, headphones that don't fall out when I'm cycling. The open-ear design lets me stay aware of traffic, which is a huge safety plus.</p>"
          }
        },
        {
          "type": "review",
          "settings": {
            "rating": 4,
            "author": "Michael Chen",
            "quote": "<p>Battery life is insane. I charge the case once a week. The only thing I'd wish for is more color options, but functionally they are perfect.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
