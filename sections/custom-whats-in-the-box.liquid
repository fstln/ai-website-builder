{%- liquid
  assign section_dom_id = 'in-the-box-' | append: section.id
-%}
<section id="{{ section.settings.section_id | default: 'whats-in-the-box' }}" class="color-scheme color-{{ section.settings.color_scheme | default: 'scheme-1' }} bg-background" data-section-id="{{ section.id }}" data-section-type="custom-in-the-box">
  <div id="{{ section_dom_id }}" class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20">
    <div class="text-center space-y-4 mb-8">
      {%- if section.settings.heading != blank -%}
        <h2 class="text-3xl sm:text-4xl font-bold tracking-tight text-foreground">{{ section.settings.heading | escape }}</h2>
      {%- endif -%}
      {%- if section.settings.subheading != blank -%}
        <div class="text-lg text-muted max-w-2xl mx-auto">{{ section.settings.subheading }}</div>
      {%- endif -%}
    </div>

    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8">
      {%- if section.blocks.size > 0 -%}
        {%- for block in section.blocks -%}
          {%- if block.type == 'item' -%}
            <article class="bg-surface rounded-xl shadow-sm p-6 text-center flex flex-col items-center gap-4" {{ block.shopify_attributes }}>
              <div class="w-24 h-24 rounded-lg overflow-hidden bg-surface-muted flex items-center justify-center">
                {%- if block.settings.image != blank -%}
                  <img src="{{ block.settings.image | image_url: width: 320 }}" alt="{{ block.settings.alt | default: block.settings.title | escape }}" class="w-full h-full object-contain" loading="lazy" decoding="async">
                {%- else -%}
                  <img src="https://placehold.co/320x320?text=Item" alt="{{ block.settings.alt | default: 'Box item placeholder' | escape }}" class="w-full h-full object-contain" loading="lazy" decoding="async">
                {%- endif -%}
              </div>
              <h3 class="text-base font-semibold text-foreground">{{ block.settings.title | default: 'Item' | escape }}</h3>
              {%- if block.settings.note != blank -%}
                <p class="text-sm text-muted leading-relaxed">{{ block.settings.note }}</p>
              {%- endif -%}
            </article>
          {%- endif -%}
        {%- endfor -%}
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "C: What's In The Box",
  "settings": [
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "text", "id": "section_id", "label": "Section ID", "default": "whats-in-the-box" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "What's In The Box" },
    { "type": "richtext", "id": "subheading", "label": "Subheading", "default": "<p>All the essentials to get started immediately</p>" }
  ],
  "blocks": [
    {
      "type": "item",
      "name": "Box item",
      "settings": [
        { "type": "image_picker", "id": "image", "label": "Image" },
        { "type": "text", "id": "alt", "label": "Image alt", "default": "Box item image" },
        { "type": "text", "id": "title", "label": "Title", "default": "OWS Pro Earbuds" },
        { "type": "text", "id": "note", "label": "Note", "default": "Left + Right" }
      ]
    }
  ],
  "presets": [
    { "name": "C: What's In The Box" }
  ]
}
{% endschema %}
