<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js" defer></script>

{%- liquid
  assign section_dom_id = "tech-specs-" | append: section.id
-%}

<section
  id="{{ section_dom_id }}"
  class="py-16 lg:py-24 color-scheme color-{{ section.settings.color_scheme | default: 'scheme-1' }} bg-background"
>
  <div class="mx-auto max-w-7xl px-6">
    {%- if section.settings.title != blank -%}
      <div class="text-center mb-16">
        <h2 class="text-4xl md:text-5xl font-bold tracking-tight text-foreground mb-4">
          {{ section.settings.title }}
        </h2>
      </div>
    {%- endif -%}

    {%- if section.blocks.size > 0 -%}
      <div class="max-w-4xl mx-auto" x-data="{ open: '{{ section.blocks.first.id }}' }">
        {%- for block in section.blocks -%}
          <div class="border-b border-border" {{ block.shopify_attributes }}>
            <button
              @click="open = open === '{{ block.id }}' ? '' : '{{ block.id }}'"
              class="w-full flex justify-between items-center py-6 text-left"
            >
              <h3 class="text-xl font-semibold text-foreground">{{ block.settings.title }}</h3>
              <svg
                class="w-6 h-6 transition-transform text-muted"
                :class="{ 'rotate-180': open === '{{ block.id }}' }"
                fill="none"
                stroke="currentColor"
                viewBox="0 0 24 24"
              >
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </button>
            <div x-show="open === '{{ block.id }}'" x-collapse.duration.300ms class="pb-6">
              <div class="prose prose-sm max-w-none text-muted">
                {{ block.settings.content }}
              </div>
            </div>
          </div>
        {%- endfor -%}
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "C: Tech Specs Accordion",
  "tag": "section",
  "class": "custom-tech-specs",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Inside the OWS Pro"
    }
  ],
  "blocks": [
    {
      "type": "spec_item",
      "name": "Specification Item",
      "settings": [
        {
          "type": "text",
          "id": "title",
          "label": "Title",
          "default": "Design & Fit"
        },
        {
          "type": "richtext",
          "id": "content",
          "label": "Content",
          "default": "<dl class='grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4'><dt class='font-medium text-gray-800'>Type</dt><dd>Open Ear</dd><dt class='font-medium text-gray-800'>Earphone Materials</dt><dd>Skin-friendly silicone, titanium memory steel wire</dd></dl>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "C: Tech Specs Accordion",
      "blocks": [
        {
          "type": "spec_item",
          "settings": {
            "title": "Design & Fit",
            "content": "<dl class='grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4'><dt class='font-medium'>Type</dt><dd>Open Ear</dd><dt class='font-medium'>Earphone Materials</dt><dd>Skin-friendly silicone, titanium memory steel wire</dd><dt class='font-medium'>Charging Case Materials</dt><dd>PC+ABS plastic alloy</dd><dt class='font-medium'>Single Earphone Weight</dt><dd>13.8g</dd></dl>"
          }
        },
        {
          "type": "spec_item",
          "settings": {
            "title": "Audio",
            "content": "<dl class='grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4'><dt class='font-medium'>Speaker Size</dt><dd>23mm x 10mm</dd><dt class='font-medium'>Frequency Response</dt><dd>20-20000Hz</dd><dt class='font-medium'>Sound Pressure Level</dt><dd>112dB</dd><dt class='font-medium'>Bluetooth Protocol</dt><dd>SBC</dd></dl>"
          }
        },
        {
          "type": "spec_item",
          "settings": {
            "title": "Battery",
            "content": "<dl class='grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4'><dt class='font-medium'>Single Earphone Life</dt><dd>16 Hours</dd><dt class='font-medium'>With Charging Case</dt><dd>58 Hours</dd><dt class='font-medium'>Earphone Charge Time</dt><dd>2 Hours</dd><dt class='font-medium'>Battery Technology</dt><dd>Self-developed 150mAh 'Little Steel Cannon'</dd></dl>"
          }
        },
        {
          "type": "spec_item",
          "settings": {
            "title": "What's in the Box",
            "content": "<div class='flex flex-col md:flex-row items-center gap-8'><img src='https://placehold.co/200x200/e5e7eb/1f2937?text=Box+Contents' alt='What\\'s in the box' class='w-48 h-48 object-cover rounded-lg' /><ul class='list-disc list-inside space-y-2'><li>oladance OWS Pro</li><li>Charging case</li><li>Type-C Cable</li><li>User manual</li><li>Brand Card</li></ul></div>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
