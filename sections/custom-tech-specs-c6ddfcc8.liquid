{%- comment -%}
  This section displays detailed technical specifications in a collapsible accordion format.
  This respects the "Collapse, Don't Disturb" principle for information architecture.
{%- endcomment -%}

{%- liquid
  assign section_id = 'tech-specs-' | append: section.id
-%}

<div id="{{ section_id }}" class="color-scheme color-{{ section.settings.color_scheme }}">
  <div class="container-custom py-12 md:py-24">
    <div class="max-w-3xl mx-auto text-center mb-12 md:mb-16">
      {%- if section.settings.heading != blank -%}
        <h2 class="text-3xl md:text-4xl font-bold tracking-tight text-foreground">
          {{ section.settings.heading }}
        </h2>
      {%- endif -%}
    </div>

    <div class="max-w-4xl mx-auto">
      {%- for block in section.blocks -%}
        <details class="border-b border-border last:border-b-0 py-4" {% if forloop.first %}open{% endif %}>
          <summary class="flex justify-between items-center cursor-pointer list-none">
            <span class="text-xl font-bold text-foreground">{{ block.settings.category_title }}</span>
            <span class="transform transition-transform duration-300">
              {%- render 'icon', name: 'chevron-down', class: 'w-6 h-6 text-foreground' -%}
            </span>
          </summary>
          <div class="mt-4 prose prose-lg text-foreground-muted max-w-none">
            {{ block.settings.spec_table }}
          </div>
        </details>
      {%- endfor -%}
    </div>
  </div>
</div>

<style>
  details[open] > summary span.transform {
    transform: rotate(180deg);
  }
</style>

{% schema %}
{
  "name": "Custom Tech Specs",
  "tag": "section",
  "class": "custom-tech-specs-section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-1"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Technical Specifications"
    }
  ],
  "blocks": [
    {
      "type": "spec_category",
      "name": "Specification Category",
      "settings": [
        {
          "type": "html",
          "id": "category_title",
          "label": "Category Title",
          "default": "Audio"
        },
        {
          "type": "html",
          "id": "spec_table",
          "label": "Specification Table",
          "info": "Use a table for structured data."
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Tech Specs"
    }
  ]
}
{% endschema %}
