
{% comment %}
  ** Haivivi BubblePal Product Detail Page Section **
  - This section is a comprehensive PDP layout designed specifically for the BubblePal product.
  - It follows the Information Architecture defined by the PM.
  - It uses the global design tokens for styling.
  - It is fully responsive and mobile-first.
{% endcomment %}

<div class="haivivi-pdp">
  <section class="pdp-section hero-section">
    <div class="pdp-container">
      <div class="hero-layout">
        <!-- Left Column: Image Gallery -->
        <div class="hero-gallery">
          <div class="gallery-main-image">
            <img id="main-product-image" src="https://placehold.co/600x600/5BC0DE/FFFFFF?text=BubblePal" alt="Main view of the BubblePal device" class="animate__animated animate__fadeIn">
          </div>
          <div class="gallery-thumbnails">
            <img src="https://placehold.co/100x100/5BC0DE/FFFFFF?text=View+1" alt="BubblePal device front view" class="thumbnail active" data-image="https://placehold.co/600x600/5BC0DE/FFFFFF?text=BubblePal">
            <img src="https://placehold.co/100x100/FDEE87/1A202C?text=View+2" alt="BubblePal attached to a teddy bear" class="thumbnail" data-image="https://placehold.co/600x600/FDEE87/1A202C?text=Attached+to+Toy">
            <img src="https://placehold.co/100x100/FF6B6B/FFFFFF?text=View+3" alt="Child happily playing with BubblePal" class="thumbnail" data-image="https://placehold.co/600x600/FF6B6B/FFFFFF?text=Lifestyle">
            <img src="https://placehold.co/100x100/E2E8F0/1A202C?text=View+4" alt="BubblePal packaging" class="thumbnail" data-image="https://placehold.co/600x600/E2E8F0/1A202C?text=Packaging">
          </div>
        </div>

        <!-- Right Column: Product Info -->
        <div class="hero-info">
          <h1 class="product-title">{{ 'products.product.name' | t: product_name: 'BubblePal' }}</h1>
          <p class="product-slogan">{{ 'products.product.slogan' | t }}</p>
          
          <div class="usps">
            <div class="usp-item">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18.75a6 6 0 006-6v-1.5m-6 7.5a6 6 0 01-6-6v-1.5m12 7.5v-1.5a6 6 0 00-6-6m-6 6a6 6 0 006-6m-6 6H4.5m6 6V21m6-10.5V6A6 6 0 006 6v1.5m6 10.5S21 12 21 10.5a6 6 0 00-12 0c0 1.5 4.5 4.5 4.5 4.5z" /></svg>
              <span>{{ 'products.product.usp_conversation' | t }}</span>
            </div>
            <div class="usp-item">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75m-3-7.036A11.959 11.959 0 013.598 6 11.99 11.99 0 003 9.749c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.286zm0 13.036h.008v.008h-.008v-.008z" /></svg>
              <span>{{ 'products.product.usp_safety' | t }}</span>
            </div>
            <div class="usp-item">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M11.48 3.499a.562.562 0 011.04 0l2.125 5.111a.563.563 0 00.475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 00-.182.557l1.285 5.385a.562.562 0 01-.84.61l-4.725-2.885a.563.563 0 00-.586 0L6.982 20.54a.562.562 0 01-.84-.61l1.285-5.386a.562.562 0 00-.182-.557l-4.204-3.602a.563.563 0 01.321-.988l5.518-.442a.563.563 0 00.475-.345L11.48 3.5z" /></svg>
              <span>{{ 'products.product.usp_customization' | t }}</span>
            </div>
          </div>

          <div class="price-section">
            <span class="price">$89.00</span>
            <span class="currency">USD</span>
          </div>

          <div class="promo-banner">
            <p>{{ 'products.product.promo_offer' | t }}</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section class="pdp-section how-to-play-section">
    <div class="pdp-container">
      <h2 class="section-title">{{ 'products.product.how_to_play_title' | t }}</h2>
      <div class="steps-container">
        <div class="step-card animate__animated" data-animation="animate__fadeInUp">
          <div class="step-icon">1</div>
          <h3 class="step-title">{{ 'products.product.how_to_play_step1_title' | t }}</h3>
          <p class="step-description">{{ 'products.product.how_to_play_step1_desc' | t }}</p>
        </div>
        <div class="step-card animate__animated" data-animation="animate__fadeInUp" style="animation-delay: 0.2s;">
          <div class="step-icon">2</div>
          <h3 class="step-title">{{ 'products.product.how_to_play_step2_title' | t }}</h3>
          <p class="step-description">{{ 'products.product.how_to_play_step2_desc' | t }}</p>
        </div>
        <div class="step-card animate__animated" data-animation="animate__fadeInUp" style="animation-delay: 0.4s;">
          <div class="step-icon">3</div>
          <h3 class="step-title">{{ 'products.product.how_to_play_step3_title' | t }}</h3>
          <p class="step-description">{{ 'products.product.how_to_play_step3_desc' | t }}</p>
        </div>
      </div>
    </div>
  </section>

  <section class="pdp-section features-section">
    <div class="pdp-container">
      <h2 class="section-title">{{ 'products.product.features_title' | t }}</h2>
      <div class="features-grid">
        {% for i in (1..6) %}
          <div class="feature-item animate__animated" data-animation="animate__zoomIn">
            <div class="feature-icon">
              <img src="https://placehold.co/64x64/5BC0DE/FFFFFF?text=Icon" alt="Feature {{ i }} icon">
            </div>
            <h3 class="feature-title">{{ 'products.product.feature_' | append: i | append: '_title' | t }}</h3>
            <p class="feature-description">{{ 'products.product.feature_' | append: i | append: '_desc' | t }}</p>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <section class="pdp-section testimonials-section">
    <div class="pdp-container">
      <h2 class="section-title">{{ 'products.product.testimonials_title' | t }}</h2>
      <div class="testimonials-grid">
        {% for i in (1..3) %}
          <div class="testimonial-card animate__animated" data-animation="animate__fadeIn">
            <p class="testimonial-quote">"{{ 'products.product.testimonial_' | append: i | append: '_quote' | t }}"</p>
            <span class="testimonial-author">- {{ 'products.product.testimonial_' | append: i | append: '_author' | t }}</span>
          </div>
        {% endfor %}
      </div>
    </div>
  </section>

  <section class="pdp-section security-section">
    <div class="pdp-container">
      <div class="security-layout">
        <div class="security-image">
          <img src="https://placehold.co/500x400/1A202C/FFFFFF?text=Data+Security" alt="Illustration representing data security and privacy" class="animate__animated" data-animation="animate__fadeInLeft">
        </div>
        <div class="security-content">
          <h2 class="section-title">{{ 'products.product.security_title' | t }}</h2>
          <p>{{ 'products.product.security_assurance' | t }}</p>
          <ul class="security-pillars">
            {% for i in (1..4) %}
              <li>
                <strong>{{ 'products.product.security_pillar_' | append: i | append: '_name' | t }}:</strong>
                {{ 'products.product.security_pillar_' | append: i | append: '_desc' | t }}
              </li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </section>

  <section class="pdp-section specs-section">
    <div class="pdp-container">
      <div class="specs-layout">
        <div class="specs-column">
          <h3 class="specs-title">{{ 'products.product.specs_title' | t }}</h3>
          <ul>
            <li><strong>{{ 'products.product.spec_color_label' | t }}:</strong> {{ 'products.product.spec_color_value' | t }}</li>
            <li><strong>{{ 'products.product.spec_size_label' | t }}:</strong> {{ 'products.product.spec_size_value' | t }}</li>
            <li><strong>{{ 'products.product.spec_materials_label' | t }}:</strong> {{ 'products.product.spec_materials_value' | t }}</li>
            <li><strong>{{ 'products.product.spec_battery_label' | t }}:</strong> {{ 'products.product.spec_battery_value' | t }}</li>
          </ul>
        </div>
        <div class="in-the-box-column">
          <h3 class="specs-title">{{ 'products.product.in_the_box_title' | t }}</h3>
          <ul>
            <li>{{ 'products.product.in_the_box_item1' | t }}</li>
            <li>{{ 'products.product.in_the_box_item2' | t }}</li>
            <li>{{ 'products.product.in_the_box_item3' | t }}</li>
          </ul>
        </div>
      </div>
    </div>
  </section>
</div>

{% schema %}
{
  "name": "PDP Haivivi BubblePal",
  "tag": "section",
  "class": "pdp-haivivi-bubblepal-section",
  "settings": [],
  "presets": [
    {
      "name": "PDP Haivivi BubblePal"
    }
  ]
}
{% endschema %}

<style>
  /* Using BEM-like naming convention for clarity */
  .haivivi-pdp {
    --pdp-spacing-y: 64px;
    --pdp-container-max-width: 1200px;
    --pdp-container-padding-x: 24px;
    font-family: var(--font-body);
    color: var(--color-text);
    --pdp-surface-muted: color-mix(in srgb, var(--color-background) 92%, var(--color-text-secondary) 8%);
    --pdp-surface-accent: color-mix(in srgb, var(--color-background) 80%, var(--color-primary) 20%);
  }

  @media (min-width: 768px) {
    .haivivi-pdp {
      --pdp-spacing-y: 96px;
    }
  }

  .pdp-section {
    padding-top: var(--pdp-spacing-y);
    padding-bottom: var(--pdp-spacing-y);
  }

  .pdp-container {
    max-width: var(--pdp-container-max-width);
    margin-left: auto;
    margin-right: auto;
    padding-left: var(--pdp-container-padding-x);
    padding-right: var(--pdp-container-padding-x);
  }

  .section-title {
    font-family: var(--font-heading);
    font-size: 2.25rem;
    font-weight: var(--font-weight-bold);
    text-align: center;
    margin-bottom: 48px;
    color: var(--color-text);
  }

  /* Hero Section */
  .hero-section {
    background-color: var(--pdp-surface-muted);
    padding-top: 48px;
  }
  .hero-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 48px;
  }
  @media (min-width: 768px) {
    .hero-layout {
      grid-template-columns: 1fr 1fr;
      align-items: center;
    }
  }

  .hero-gallery .gallery-main-image img {
    width: 100%;
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-lg);
  }
  .gallery-thumbnails {
    display: flex;
    gap: 12px;
    margin-top: 16px;
  }
  .gallery-thumbnails .thumbnail {
    width: 100px;
    height: 100px;
    border-radius: var(--border-radius-md);
    cursor: pointer;
    border: 2px solid transparent;
    transition: border-color 0.3s, transform 0.3s;
  }
  .gallery-thumbnails .thumbnail:hover {
    transform: scale(1.05);
  }
  .gallery-thumbnails .thumbnail.active {
    border-color: var(--color-primary);
  }

  .hero-info .product-title {
    font-family: var(--font-heading);
    font-size: 2.5rem;
    font-weight: var(--font-weight-bold);
    margin-bottom: 8px;
  }
  .hero-info .product-slogan {
    font-size: 1.25rem;
    color: var(--color-text-secondary);
    margin-bottom: 24px;
  }
  .usps {
    display: flex;
    flex-direction: column;
    gap: 16px;
    margin-bottom: 24px;
  }
  .usp-item {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 1rem;
  }
  .usp-item svg {
    width: 24px;
    height: 24px;
    color: var(--color-primary);
  }

  .price-section {
    margin-bottom: 24px;
  }
  .price-section .price {
    font-size: 2.5rem;
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
  }
  .price-section .currency {
    font-size: 1.25rem;
    color: var(--color-text-secondary);
    margin-left: 8px;
  }
  
  .promo-banner {
    background-color: var(--color-secondary);
    color: var(--color-text);
    padding: 16px;
    border-radius: var(--border-radius-md);
    text-align: center;
    font-weight: 500;
  }

  /* How to Play Section */
  .how-to-play-section {
    background-color: var(--color-background);
  }
  .steps-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 32px;
  }
  .step-card {
    text-align: center;
  }
  .step-icon {
    width: 64px;
    height: 64px;
    border-radius: var(--border-radius-full);
    background-color: var(--color-primary);
    color: var(--color-background, #ffffff);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 2rem;
    font-weight: var(--font-weight-bold);
    margin: 0 auto 24px;
  }
  .step-title {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    margin-bottom: 12px;
  }
  .step-description {
    color: var(--color-text-secondary);
  }

  /* Features Section */
  .features-section {
    background-color: var(--pdp-surface-muted);
  }
  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 32px;
  }
  .feature-item {
    background-color: var(--color-background);
    padding: 32px;
    border-radius: var(--border-radius-lg);
    text-align: center;
    box-shadow: var(--shadow-md);
    transition: transform 0.3s, box-shadow 0.3s;
  }
  .feature-item:hover {
    transform: translateY(-8px);
    box-shadow: var(--shadow-lg);
  }
  .feature-icon {
    margin-bottom: 24px;
  }
  .feature-icon img {
    border-radius: var(--border-radius-full);
  }
  .feature-title {
    font-family: var(--font-heading);
    font-size: 1.25rem;
    margin-bottom: 8px;
  }
  .feature-description {
    color: var(--color-text-secondary);
  }

  /* Testimonials Section */
  .testimonials-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 32px;
  }
  .testimonial-card {
    background-color: var(--color-background);
    padding: 32px;
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--color-border);
    display: flex;
    flex-direction: column;
  }
  .testimonial-quote {
    font-size: 1.125rem;
    font-style: italic;
    color: var(--color-text-secondary);
    flex-grow: 1;
    margin-bottom: 16px;
  }
  .testimonial-author {
    font-weight: var(--font-weight-bold);
    color: var(--color-text);
    align-self: flex-end;
  }

  /* Security Section */
  .security-section {
    background-color: var(--pdp-surface-muted);
  }
  .security-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 48px;
    align-items: center;
  }
  @media (min-width: 768px) {
    .security-layout {
      grid-template-columns: 1fr 1.2fr;
    }
  }
  .security-image img {
    width: 100%;
    border-radius: var(--border-radius-lg);
  }
  .security-content .section-title {
    text-align: left;
  }
  .security-content p {
    color: var(--color-text-secondary);
    margin-bottom: 24px;
  }
  .security-pillars {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 16px;
  }
  .security-pillars li {
    line-height: 1.6;
  }

  /* Specs Section */
  .specs-layout {
    display: grid;
    grid-template-columns: 1fr;
    gap: 48px;
  }
  @media (min-width: 768px) {
    .specs-layout {
      grid-template-columns: 1fr 1fr;
    }
  }
  .specs-title {
    font-family: var(--font-heading);
    font-size: 1.5rem;
    margin-bottom: 24px;
    border-bottom: 2px solid var(--color-primary);
    padding-bottom: 8px;
  }
  .specs-column ul, .in-the-box-column ul {
    list-style: none;
    padding: 0;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  .specs-column li, .in-the-box-column li {
    color: var(--color-text-secondary);
  }
  .specs-column li strong {
    color: var(--color-text);
  }
</style>

<script>
  // Self-contained script for PDP Haivivi BubblePal section
  document.addEventListener('DOMContentLoaded', () => {
    const pdpSection = document.querySelector('.pdp-haivivi-bubblepal-section');
    if (!pdpSection) return;

    // Image Gallery Logic
    const mainImage = pdpSection.querySelector('#main-product-image');
    const thumbnails = pdpSection.querySelectorAll('.thumbnail');

    thumbnails.forEach(thumbnail => {
      thumbnail.addEventListener('click', () => {
        // Update main image
        mainImage.src = thumbnail.dataset.image;
        mainImage.alt = thumbnail.alt;
        
        // Animate the image change
        mainImage.classList.remove('animate__fadeIn');
        void mainImage.offsetWidth; // Trigger reflow
        mainImage.classList.add('animate__fadeIn');

        // Update active state
        thumbnails.forEach(t => t.classList.remove('active'));
        thumbnail.classList.add('active');
      });
    });

    // Scroll Animation Logic
    const animatedElements = pdpSection.querySelectorAll('.animate__animated[data-animation]');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const animationClass = entry.target.dataset.animation;
          entry.target.classList.add(animationClass);
          observer.unobserve(entry.target);
        }
      });
    }, {
      threshold: 0.1
    });

    animatedElements.forEach(el => {
      observer.observe(el);
    });
  });
</script>
