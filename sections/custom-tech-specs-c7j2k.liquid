{%- comment -%}
  This section provides detailed technical specifications in a collapsible format.

  **Best Practices:**
  - PM: Ensure data is accurate and sourced from the product documentation.
  - Designer: Use a clean, scannable, two-column layout. Keep it minimal.
  - Architect: Use the native <details> element for the accordion for performance and accessibility. Use repeater blocks for the specs.
{%- endcomment -%}

{%- liquid
  assign section_dom_id = 'custom-tech-specs-' | append: section.id
-%}

<div class="color-scheme color-{{ section.settings.color_scheme | default: 'scheme-1' }} isolate">
  <section
    id="{{ section_dom_id }}"
    class="bg-background text-foreground py-12 sm:py-16 lg:py-20"
    aria-labelledby="tech-specs-title-{{ section.id }}"
  >
    <div class="mx-auto max-w-3xl px-4 sm:px-6 lg:px-8">
      <div class="text-center">
        {%- if section.settings.title != blank -%}
          <h2 id="tech-specs-title-{{ section.id }}" class="text-3xl sm:text-4xl font-bold tracking-tight text-foreground">
            {{ section.settings.title | escape }}
          </h2>
        {%- endif -%}
      </div>

      {%- if section.blocks.size > 0 -%}
        <div class="mt-10 border-t border-border">
          <details class="group py-6" open>
            <summary class="flex cursor-pointer list-none items-center justify-between text-lg font-medium text-foreground">
              <span>{{ section.settings.accordion_title | escape }}</span>
              <span class="transition-transform group-open:rotate-180">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-6 w-6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
                </svg>
              </span>
            </summary>
            <div class="mt-6 space-y-4">
              {%- for block in section.blocks -%}
                <div
                  class="grid grid-cols-2 gap-4 text-sm"
                  {{ block.shopify_attributes }}
                >
                  {%- if block.settings.spec_name != blank -%}
                    <dt class="text-muted">{{ block.settings.spec_name | escape }}</dt>
                  {%- endif -%}
                  {%- if block.settings.spec_value != blank -%}
                    <dd class="text-foreground">{{ block.settings.spec_value | escape }}</dd>
                  {%- endif -%}
                </div>
              {%- endfor -%}
            </div>
          </details>
        </div>
      {%- endif -%}
    </div>
  </section>
</div>

{% schema %}
{
  "name": "Tech Specs",
  "tag": "section",
  "class": "custom-tech-specs-section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-2"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Heading",
      "default": "Technical Specifications"
    },
    {
      "type": "text",
      "id": "accordion_title",
      "label": "Accordion Title",
      "default": "View Full Specs"
    }
  ],
  "blocks": [
    {
      "type": "spec",
      "name": "Specification",
      "limit": 20,
      "settings": [
        {
          "type": "text",
          "id": "spec_name",
          "label": "Spec Name",
          "default": "Bluetooth Version"
        },
        {
          "type": "text",
          "id": "spec_value",
          "label": "Spec Value",
          "default": "5.3"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Tech Specs",
      "blocks": [
        { "type": "spec" },
        { "type": "spec" },
        { "type": "spec" },
        { "type": "spec" }
      ]
    }
  ]
}
{% endschema %}
