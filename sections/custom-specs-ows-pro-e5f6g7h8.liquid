{%- comment -%}
  This section provides detailed technical specifications for users in the decision phase.
  - PM: Focused on transparency and completeness of information to build trust.
  - Designer: Used an accordion layout to organize specs into categories for readability.
  - Architect: Implemented a JS-free accordion using `<details>` and `<summary>` for accessibility and performance, with a flexible nested block schema.
{%- endcomment -%}

<section class="color-scheme color-{{ section.settings.color_scheme }} bg-background py-16 sm:py-20 lg:py-24">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="mx-auto max-w-2xl lg:text-center">
      <h2 class="text-3xl font-bold tracking-tight text-foreground sm:text-4xl font-heading">
        {{ section.settings.heading }}
      </h2>
      <p class="mt-6 text-lg leading-8 text-muted">
        {{ section.settings.subheading }}
      </p>
    </div>
    <div class="mx-auto mt-16 max-w-3xl space-y-6">
      {%- for block in section.blocks -%}
        <details class="group rounded-lg bg-surface p-6 shadow-sm" {% if forloop.first %}open{% endif %} {{ block.shopify_attributes }}>
          <summary class="flex cursor-pointer items-center justify-between text-lg font-medium text-foreground">
            {{ block.settings.category_title }}
            <span class="ml-4 h-6 w-6 flex-shrink-0">
              <svg class="h-6 w-6 transform transition-transform duration-200 group-open:-rotate-180" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" aria-hidden="true">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" />
              </svg>
            </span>
          </summary>
          <div class="mt-4">
            <dl class="divide-y divide-border">
              {%- for sub_block in block.blocks -%}
                <div class="grid grid-cols-2 gap-4 py-3" {{ sub_block.shopify_attributes }}>
                  <dt class="text-sm font-medium text-muted">{{ sub_block.settings.spec_name }}</dt>
                  <dd class="text-sm text-foreground">{{ sub_block.settings.spec_value }}</dd>
                </div>
              {%- endfor -%}
            </dl>
          </div>
        </details>
      {%- endfor -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Custom: Specs (OWS Pro)",
  "tag": "section",
  "class": "custom-specs-ows-pro-section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-2"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Technical Specifications"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "Dive into the details of the Oladance OWS Pro."
    }
  ],
  "blocks": [
    {
      "type": "spec_category",
      "name": "Spec Category",
      "settings": [
        {
          "type": "text",
          "id": "category_title",
          "label": "Category Title",
          "default": "Audio & Sound"
        }
      ],
      "blocks": [
        {
          "type": "spec_item",
          "name": "Specification",
          "settings": [
            {
              "type": "text",
              "id": "spec_name",
              "label": "Spec Name",
              "default": "Driver/Speaker Size"
            },
            {
              "type": "text",
              "id": "spec_value",
              "label": "Spec Value",
              "default": "23mm * 10mm"
            }
          ]
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom: Specs (OWS Pro)",
      "blocks": [
        {
          "type": "spec_category",
          "settings": {
            "category_title": "Audio & Sound"
          },
          "blocks": [
            { "type": "spec_item", "settings": { "spec_name": "Driver/Speaker Size", "spec_value": "23mm * 10mm" } },
            { "type": "spec_item", "settings": { "spec_name": "Sound Pressure Level (SPL)", "spec_value": "112dB" } },
            { "type": "spec_item", "settings": { "spec_name": "Earphone Frequency Response", "spec_value": "20Hz - 20,000Hz" } },
            { "type": "spec_item", "settings": { "spec_name": "Microphone Type", "spec_value": "MEMS" } },
            { "type": "spec_item", "settings": { "spec_name": "Audio Codec", "spec_value": "SBC" } }
          ]
        },
        {
          "type": "spec_category",
          "settings": {
            "category_title": "Connectivity"
          },
          "blocks": [
            { "type": "spec_item", "settings": { "spec_name": "Bluetooth Version", "spec_value": "V5.3" } },
            { "type": "spec_item", "settings": { "spec_name": "Communication Distance", "spec_value": "â‰¥20m" } }
          ]
        },
        {
          "type": "spec_category",
          "settings": {
            "category_title": "Battery & Charging"
          },
          "blocks": [
            { "type": "spec_item", "settings": { "spec_name": "Battery Life (Single Earphone)", "spec_value": "16 Hours" } },
            { "type": "spec_item", "settings": { "spec_name": "Battery Life (With Charging Case)", "spec_value": "58 Hours" } },
            { "type": "spec_item", "settings": { "spec_name": "Charging Time (Earphone)", "spec_value": "2 Hours" } }
          ]
        },
        {
          "type": "spec_category",
          "settings": {
            "category_title": "Physical"
          },
          "blocks": [
            { "type": "spec_item", "settings": { "spec_name": "Weight (Single Earphone)", "spec_value": "13.8g" } },
            { "type": "spec_item", "settings": { "spec_name": "Materials (Earphone)", "spec_value": "Skin-friendly silicone, titanium memory steel wire" } },
            { "type": "spec_item", "settings": { "spec_name": "Waterproof Rating", "spec_value": "IPX4" } }
          ]
        }
      ]
    }
  ]
}
{% endschema %}
