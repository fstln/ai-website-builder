{%- comment -%}
  This section highlights the superior audio quality of the OWS Pro, focusing on bass and clarity.
  It uses an asymmetrical layout to create a modern, high-tech feel.
{%- endcomment -%}

{%- liquid
  assign section_id = 'custom-ksp-audio-' | append: section.id
  assign bg_color = section.settings.background_color
  assign text_color = section.settings.text_color
-%}

<style>
  #{{ section_id }} {
    background-color: {{ bg_color }} !important;
    color: {{ text_color }} !important;
    padding: clamp(3rem, 7vw, 6rem) 0;
  }

  #{{ section_id }} .container-custom {
    margin: 0 auto;
    max-width: 1200px;
    padding: 0 1.5rem;
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    align-items: center;
  }

  @media (min-width: 768px) {
    #{{ section_id }} .container-custom {
      grid-template-columns: repeat(2, 1fr);
      gap: 4rem;
    }
  }

  #{{ section_id }} .ksp-audio__content {
    text-align: center;
  }

  @media (min-width: 768px) {
    #{{ section_id }} .ksp-audio__content {
      text-align: left;
    }
  }

  #{{ section_id }} .ksp-audio__headline {
    font-size: clamp(2.5rem, 5vw, 3.5rem);
    font-weight: 700;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    letter-spacing: -0.025em;
  }

  #{{ section_id }} .ksp-audio__description {
    font-size: 1.125rem;
    line-height: 1.6;
    margin-bottom: 2rem;
    max-width: 500px;
    margin-left: auto;
    margin-right: auto;
  }
  
  @media (min-width: 768px) {
    #{{ section_id }} .ksp-audio__description {
      margin-left: 0;
      margin-right: 0;
    }
  }

  #{{ section_id }} .ksp-audio__features {
    display: flex;
    flex-wrap: wrap;
    gap: 1rem 2rem;
    justify-content: center;
  }

  @media (min-width: 768px) {
    #{{ section_id }} .ksp-audio__features {
      justify-content: flex-start;
    }
  }

  #{{ section_id }} .ksp-audio__feature-item {
    font-size: 0.875rem;
    font-weight: 500;
    opacity: 0.8;
  }

  #{{ section_id }} .ksp-audio__image-wrapper {
    max-width: 500px;
    margin: 0 auto;
  }

  #{{ section_id }} .ksp-audio__image {
    width: 100%;
    height: auto;
    border-radius: 1rem;
    object-fit: cover;
  }
</style>

<section id="{{ section_id }}">
  <div class="container-custom">
    <div class="ksp-audio__content">
      <h2 class="ksp-audio__headline">{{ section.settings.headline | escape }}</h2>
      <p class="ksp-audio__description">{{ section.settings.description | escape }}</p>
      <div class="ksp-audio__features">
        {%- for block in section.blocks -%}
          <div class="ksp-audio__feature-item" {{ block.shopify_attributes }}>
            <span>{{ block.settings.feature_text | escape }}</span>
          </div>
        {%- endfor -%}
      </div>
    </div>
    <div class="ksp-audio__image-wrapper">
      {%- if section.settings.image != blank -%}
        <img
          src="{{ section.settings.image | image_url: width: 1000 }}"
          alt="{{ section.settings.image.alt | default: 'OWS Pro audio feature' | escape }}"
          width="500"
          height="500"
          loading="lazy"
          class="ksp-audio__image"
        >
      {%- else -%}
        <img
          src="https://placehold.co/500x500/1E1E1E/FFFFFF?text=OWS+Pro"
          alt="Placeholder for OWS Pro audio feature"
          width="500"
          height="500"
          loading="lazy"
          class="ksp-audio__image"
        >
      {%- endif -%}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "KSP: Superior Audio",
  "tag": "section",
  "class": "custom-ksp-audio-section",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#1E1E1E"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#FFFFFF"
    },
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "HEAR THE BASS, NOT THE NOISE"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "Tired of 'tinny' open-ear sound? Our patented tech delivers deep, rich bass you can feel, while Focus Mode tunes out ambient voices."
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "limit": 4,
      "settings": [
        {
          "type": "text",
          "id": "feature_text",
          "label": "Feature Text",
          "default": "Virtual Bass 2.0"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "KSP: Superior Audio",
      "blocks": [
        { "type": "feature", "settings": { "feature_text": "Virtual Bass 2.0" } },
        { "type": "feature", "settings": { "feature_text": "Independent Amplifier" } },
        { "type": "feature", "settings": { "feature_text": "Dynamic EQ" } },
        { "type": "feature", "settings": { "feature_text": "Focus Mode" } }
      ]
    }
  ]
}
{% endschema %}
