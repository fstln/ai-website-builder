{%- comment -%}
  This section is designed to build trust and credibility through social proof.
  PM: Focuses on showcasing authentic user testimonials or media quotes.
  Designer: Creates a visually engaging, asymmetric card layout that feels modern and trustworthy. Avoids generic, boring testimonial sliders.
  Architect: Uses a block-based structure to allow for multiple testimonials, ensuring clean and maintainable code.
{%- endcomment -%}

{%- liquid
  assign section_id = 'custom-social-proof-' | append: section.id
  assign bg_color = section.settings.color_scheme
-%}

<section
  id="{{ section_id }}"
  class="color-scheme color-{{ bg_color }} overflow-hidden"
  data-section-id="{{ section.id }}"
  data-section-type="custom-social-proof-ows-pro"
>
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-16 md:py-24">
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-16 items-center">
      
      {%- comment -%} Left Column: Heading and Description {%- endcomment -%}
      <div class="lg:col-span-4 text-center lg:text-left">
        {%- if section.settings.heading != blank -%}
          <h2 class="text-3xl md:text-4xl font-bold tracking-tight text-foreground">
            {{ section.settings.heading }}
          </h2>
        {%- endif -%}
        {%- if section.settings.description != blank -%}
          <p class="mt-4 text-lg text-muted">
            {{ section.settings.description }}
          </p>
        {%- endif -%}
      </div>

      {%- comment -%} Right Column: Testimonial Cards {%- endcomment -%}
      <div class="lg:col-span-8">
        {%- if section.blocks.size > 0 -%}
          <div class="space-y-8">
            {%- for block in section.blocks limit: 2 -%}
              <div class="bg-surface p-6 rounded-2xl shadow-lg" {{ block.shopify_attributes }}>
                <div class="flex items-start gap-4">
                  <div class="flex-shrink-0">
                    {%- if block.settings.avatar != blank -%}
                      <img class="h-12 w-12 rounded-full object-cover" src="{{ block.settings.avatar | image_url: width: 96 }}" alt="{{ block.settings.author_name | escape }}">
                    {%- else -%}
                      <div class="h-12 w-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-lg">
                        {{ block.settings.author_name | slice: 0 | upcase }}
                      </div>
                    {%- endif -%}
                  </div>
                  <div class="flex-1">
                    <div class="flex items-center mb-1">
                      {% for i in (1..5) %}
                        <svg class="h-5 w-5 {% if i <= block.settings.rating %}text-yellow-400{% else %}text-gray-300{% endif %}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                          <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z" />
                        </svg>
                      {% endfor %}
                    </div>
                    {%- if block.settings.quote != blank -%}
                      <blockquote class="text-base text-foreground italic">
                        <p>"{{ block.settings.quote }}"</p>
                      </blockquote>
                    {%- endif -%}
                    {%- if block.settings.author_name != blank -%}
                      <footer class="mt-4">
                        <p class="text-sm font-semibold text-foreground">{{ block.settings.author_name }}</p>
                        {%- if block.settings.author_title != blank -%}
                          <p class="text-sm text-muted">{{ block.settings.author_title }}</p>
                        {%- endif -%}
                      </footer>
                    {%- endif -%}
                  </div>
                </div>
              </div>
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Custom: Social Proof",
  "tag": "section",
  "class": "custom-social-proof-ows-pro-section",
  "max_blocks": 2,
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-2"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Don't just take our word for it"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "See what our customers and the press are saying about the OWS Pro."
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "settings": [
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Rating",
          "default": 5
        },
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "This is the best open-ear headphone I have ever used. The bass is incredible, and they are so comfortable I forget I'm wearing them."
        },
        {
          "type": "image_picker",
          "id": "avatar",
          "label": "Author Avatar"
        },
        {
          "type": "text",
          "id": "author_name",
          "label": "Author Name",
          "default": "Alex Johnson"
        },
        {
          "type": "text",
          "id": "author_title",
          "label": "Author Title / Source",
          "default": "Verified Buyer"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom: OWS Pro Social Proof",
      "blocks": [
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial",
          "settings": {
            "quote": "The 58-hour battery life is a game-changer for my long work weeks. I rarely have to think about charging.",
            "author_name": "Samantha Lee",
            "author_title": "TechCrunch Review"
          }
        }
      ]
    }
  ]
}
{% endschema %}