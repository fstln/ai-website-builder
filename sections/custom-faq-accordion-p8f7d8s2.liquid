{%- liquid
  assign section_id = 'faq-accordion-' | append: section.id
-%}

<section
  id="{{ section_id }}"
  class="color-scheme color-{{ section.settings.color_scheme }}"
>
  <div class="container-custom py-12 md:py-24">
    <div class="max-w-3xl mx-auto text-center">
      {%- if section.settings.heading != blank -%}
        <h2 class="text-3xl md:text-4xl font-bold tracking-tight text-foreground">
          {{ section.settings.heading }}
        </h2>
      {%- endif -%}
    </div>

    <div class="mt-12 max-w-3xl mx-auto">
      <div class="divide-y divide-border">
        {%- for block in section.blocks -%}
          <details class="group py-6" {{ block.shopify_attributes }}>
            <summary
              class="flex justify-between items-center font-medium cursor-pointer list-none"
            >
              <span class="text-lg text-foreground">
                {{ block.settings.question }}
              </span>
              <span class="transition-transform group-open:rotate-180">
                {%- render 'icon', name: 'chevron-down', class: 'h-6 w-6' -%}
              </span>
            </summary>
            <div class="mt-4 text-foreground-muted prose">
              {{ block.settings.answer }}
            </div>
          </details>
        {%- endfor -%}
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "FAQ Accordion",
  "tag": "section",
  "class": "custom-faq-accordion-section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions"
    }
  ],
  "blocks": [
    {
      "type": "faq_item",
      "name": "FAQ Item",
      "limit": 5,
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "What is the return policy?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>We offer a 30-day money-back guarantee. If you're not satisfied, you can return the product for a full refund.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ Accordion",
      "blocks": [
        { "type": "faq_item" },
        { "type": "faq_item" },
        { "type": "faq_item" }
      ]
    }
  ]
}
{% endschema %}
