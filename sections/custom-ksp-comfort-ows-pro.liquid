{%- comment -%}
  This section highlights the unmatched comfort of the OWS Pro,
  using a light theme and overlapping elements to convey a sense of airiness and modern design.
{%- endcomment -%}

{%- liquid
  assign section_id = 'custom-ksp-comfort-' | append: section.id
  assign bg_color = section.settings.background_color
  assign text_color = section.settings.text_color
-%}

<style>
  #{{ section_id }} {
    background-color: {{ bg_color }};
    color: {{ text_color }};
    padding: clamp(3rem, 7vw, 6rem) 0;
    overflow: hidden;
  }

  #{{ section_id }} .container-custom {
    margin: 0 auto;
    max-width: 1200px;
    padding: 0 1.5rem;
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    align-items: center;
  }

  @media (min-width: 768px) {
    #{{ section_id }} .container-custom {
      grid-template-columns: repeat(2, 1fr);
      gap: 0; /* Remove gap to allow for overlap */
    }
  }

  #{{ section_id }} .ksp-comfort__image-wrapper {
    order: 1;
    position: relative;
    z-index: 1;
  }
  
  @media (min-width: 768px) {
    #{{ section_id }} .ksp-comfort__image-wrapper {
      order: 2;
    }
  }

  #{{ section_id }} .ksp-comfort__image {
    width: 100%;
    height: auto;
    max-width: 450px;
    border-radius: 1rem;
    display: block;
    margin: 0 auto;
  }

  #{{ section_id }} .ksp-comfort__content {
    order: 2;
    text-align: center;
    position: relative;
    z-index: 2;
  }
  
  @media (min-width: 768px) {
    #{{ section_id }} .ksp-comfort__content {
      order: 1;
      text-align: left;
      margin-left: -4rem; /* Creates the overlap */
      padding: 2rem;
      background-color: rgba(255, 255, 255, 0.7);
      backdrop-filter: blur(10px);
      border-radius: 1rem;
    }
  }

  #{{ section_id }} .ksp-comfort__headline {
    font-size: clamp(2rem, 4vw, 3rem);
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 1.5rem;
  }

  #{{ section_id }} .ksp-comfort__description {
    font-size: 1.125rem;
    line-height: 1.6;
    margin-bottom: 2rem;
    max-width: 450px;
    margin-left: auto;
    margin-right: auto;
  }
  
  @media (min-width: 768px) {
    #{{ section_id }} .ksp-comfort__description {
      margin-left: 0;
    }
  }

  #{{ section_id }} .ksp-comfort__features {
    list-style: none;
    padding: 0;
    margin: 0;
    display: inline-flex;
    flex-direction: column;
    gap: 1rem;
    align-items: flex-start;
    text-align: left;
  }

  #{{ section_id }} .ksp-comfort__feature-item {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    font-weight: 500;
  }

  #{{ section_id }} .ksp-comfort__feature-icon {
    width: 24px;
    height: 24px;
    color: #333;
  }
</style>

<section id="{{ section_id }}">
  <div class="container-custom">
    <div class="ksp-comfort__image-wrapper">
      {%- if section.settings.image != blank -%}
        <img
          src="{{ section.settings.image | image_url: width: 900 }}"
          alt="{{ section.settings.image.alt | default: 'Person comfortably wearing OWS Pro headphones' | escape }}"
          width="450"
          height="450"
          loading="lazy"
          class="ksp-comfort__image"
        >
      {%- else -%}
        <img
          src="https://placehold.co/450x450/F0F0F0/333333?text=Comfort"
          alt="Placeholder for OWS Pro comfort feature"
          width="450"
          height="450"
          loading="lazy"
          class="ksp-comfort__image"
        >
      {%- endif -%}
    </div>
    <div class="ksp-comfort__content">
      <h2 class="ksp-comfort__headline">{{ section.settings.headline | escape }}</h2>
      <p class="ksp-comfort__description">{{ section.settings.description | escape }}</p>
      <ul class="ksp-comfort__features">
        {%- for block in section.blocks -%}
          <li class="ksp-comfort__feature-item" {{ block.shopify_attributes }}>
            <svg class="ksp-comfort__feature-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span>{{ block.settings.feature_text | escape }}</span>
          </li>
        {%- endfor -%}
      </ul>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "KSP: Unmatched Comfort",
  "tag": "section",
  "class": "custom-ksp-comfort-section",
  "settings": [
    {
      "type": "color",
      "id": "background_color",
      "label": "Background Color",
      "default": "#F8F8FC"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#333333"
    },
    {
      "type": "text",
      "id": "headline",
      "label": "Headline",
      "default": "FORGET YOU'RE WEARING THEM"
    },
    {
      "type": "textarea",
      "id": "description",
      "label": "Description",
      "default": "No buds in your ear, no pain, no pressure. Just pure comfort and a wide, open soundstage."
    },
    {
      "type": "image_picker",
      "id": "image",
      "label": "Image"
    }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "limit": 3,
      "settings": [
        {
          "type": "text",
          "id": "feature_text",
          "label": "Feature Text",
          "default": "Patented OWS Technology"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "KSP: Unmatched Comfort",
      "blocks": [
        { "type": "feature", "settings": { "feature_text": "Patented OWS Technology" } },
        { "type": "feature", "settings": { "feature_text": "Fully Open-Ear Design" } },
        { "type": "feature", "settings": { "feature_text": "No In-Ear Pressure" } }
      ]
    }
  ]
}
{% endschema %}
