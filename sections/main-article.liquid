{% comment %}
  Main Article Section
  Theme 2.0 - Sections Everywhere
  视觉规范: visual_spec.md
{% endcomment %}

{% assign section_color_scheme = section.settings.color_scheme | default: 'scheme-1' %}

<section class="color-scheme color-{{ section_color_scheme }} section-main-article">
  <div class="w-full min-h-screen bg-background">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
  {% render 'breadcrumbs' %}
  
    <article class="article-content mt-8 max-w-4xl mx-auto">
      <header class="article-header mb-12">
        {%- comment -%} Title - 基于 visual_spec.md {%- endcomment -%}
        <h1 class="text-4xl sm:text-5xl font-extrabold tracking-tight leading-tight text-foreground mb-6">{{ article.title }}</h1>
      
        {%- comment -%} Meta - 基于 visual_spec.md {%- endcomment -%}
        <div class="article-meta flex flex-wrap items-center gap-3 text-base text-muted mb-8">
          <time datetime="{{ article.published_at | date: '%Y-%m-%d' }}" class="font-medium text-foreground">
            {{ article.published_at | date: '%B %d, %Y' }}
          </time>
        {% if article.author %}
            <span class="text-muted/70">·</span>
            <span class="font-medium">{{ article.author }}</span>
        {% endif %}
      </div>
      
        {%- comment -%} Featured Image {%- endcomment -%}
      {% if article.image %}
          <div class="article-image relative overflow-hidden rounded-lg shadow-md mb-8 bg-border/20">
            <img src="{{ article.image | image_url: width: 1200 }}" alt="{{ article.title }}" class="w-full h-auto" loading="eager">
          </div>
      {% endif %}
    </header>
    
      {%- comment -%} Article Body - 基于 visual_spec.md 排版规范，样式定义在 src/css/tailwind.css {%- endcomment -%}
      <div class="article-body max-w-none mb-12">
      {{ article.content }}
    </div>
    
      {%- comment -%} Tags - 基于 visual_spec.md Category Chips 规范 {%- endcomment -%}
    {% if article.tags.size > 0 %}
        <div class="article-tags mt-16 pt-8 border-t border-border">
          <h3 class="text-lg font-semibold text-foreground mb-4">{{ 'blogs.article.tags' | t | default: 'Tags' }}</h3>
        <div class="flex flex-wrap gap-2">
          {% for tag in article.tags %}
              <a href="{{ blog.url }}/tagged/{{ tag | handle }}" class="inline-flex items-center px-4 py-2 bg-border/20 text-foreground rounded-full text-sm font-medium hover:bg-border/40 transition-colors duration-200">
              {{ tag }}
            </a>
          {% endfor %}
        </div>
      </div>
    {% endif %}
    
      {%- comment -%} Comments - 基于 visual_spec.md {%- endcomment -%}
    {% if blog.comments_enabled? %}
        <div class="article-comments mt-16 pt-12 border-t border-border">
          <h2 class="text-3xl font-bold text-foreground mb-8">
            {{ 'blogs.article.comments' | t | default: 'Comments' }}
            <span class="text-2xl font-medium text-muted">({{ article.comments_count }})</span>
          </h2>
        
        {% paginate article.comments by 50 %}
          <div class="space-y-6 mb-12">
          {% for comment in article.comments %}
              <div class="comment p-6 bg-background border border-border rounded-lg">
                <div class="comment-meta text-sm font-medium text-muted mb-3 flex items-center gap-1.5">
                  <span class="font-semibold text-foreground">{{ comment.author }}</span>
                  <span class="text-muted/70">·</span>
                  <time datetime="{{ comment.created_at | date: '%Y-%m-%d' }}">
                    {{ comment.created_at | date: '%B %d, %Y' }}
                  </time>
              </div>
                <div class="comment-content text-base text-foreground leading-relaxed">
                {{ comment.content }}
              </div>
            </div>
          {% endfor %}
          </div>
        {% endpaginate %}
        
          {%- comment -%} Comment Form - 基于 visual_spec.md 表单规范 {%- endcomment -%}
        {% form 'new_comment', article %}
            <div class="pt-8 border-t border-border">
              <h3 class="text-2xl font-bold text-foreground mb-6">{{ 'blogs.article.comment_form_title' | t | default: 'Post a Comment' }}</h3>
          
              <div class="space-y-6">
            <div>
                  <label for="CommentAuthor" class="block text-sm font-medium text-foreground mb-2">
                    {{ 'blogs.article.name' | t | default: 'Name' }} <span class="text-error">*</span>
                  </label>
                  <input 
                    type="text" 
                    name="comment[author]" 
                    id="CommentAuthor" 
                    class="w-full border border-border rounded-lg px-4 py-3 text-base text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors" 
                    required
                  >
            </div>
            
            <div>
                  <label for="CommentEmail" class="block text-sm font-medium text-foreground mb-2">
                    {{ 'blogs.article.email' | t | default: 'Email' }} <span class="text-error">*</span>
                  </label>
                  <input 
                    type="email" 
                    name="comment[email]" 
                    id="CommentEmail" 
                    class="w-full border border-border rounded-lg px-4 py-3 text-base text-foreground focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors" 
                    required
                  >
            </div>
            
            <div>
                  <label for="CommentBody" class="block text-sm font-medium text-foreground mb-2">
                    {{ 'blogs.article.message' | t | default: 'Message' }} <span class="text-error">*</span>
                  </label>
                  <textarea 
                    name="comment[body]" 
                    id="CommentBody" 
                    rows="6" 
                    class="w-full border border-border rounded-lg px-4 py-3 text-base text-foreground leading-relaxed focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent transition-colors resize-vertical" 
                    required
                  ></textarea>
            </div>
            
                <button 
                  type="submit" 
                  class="btn btn-primary px-6 py-3 text-base font-medium shadow"
                >
                  {{ 'blogs.article.post' | t | default: 'Post Comment' }}
                </button>
              </div>
          </div>
        {% endform %}
      </div>
    {% endif %}
    </article>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Main Article",
  "tag": "section",
  "class": "section-main-article",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color scheme",
      "default": "scheme-1"
    }
  ]
}
{% endschema %}
