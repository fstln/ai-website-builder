{%- comment -%}
  This section provides social proof through customer testimonials and star ratings.
  It uses a clean, card-based layout to build trust and credibility.
{%- endcomment -%}

{%- liquid
  assign section_id = 'social-proof-' | append: section.id
-%}

<div id="{{ section_id }}" class="color-scheme color-{{ section.settings.color_scheme }}">
  <div class="container-custom py-12 md:py-24">
    <div class="max-w-3xl mx-auto text-center mb-12 md:mb-16">
      {%- if section.settings.heading != blank -%}
        <h2 class="text-3xl md:text-4xl font-bold tracking-tight text-foreground">
          {{ section.settings.heading }}
        </h2>
      {%- endif -%}
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {%- for block in section.blocks -%}
        <div class="bg-surface rounded-2xl p-8 shadow-lg flex flex-col">
          <div class="flex-grow">
            <div class="flex items-center mb-4">
              {%- for i in (1..5) -%}
                {%- if i <= block.settings.rating -%}
                  {%- render 'icon', name: 'star-filled', class: 'w-5 h-5 text-yellow-400' -%}
                {%- else -%}
                  {%- render 'icon', name: 'star-outline', class: 'w-5 h-5 text-gray-300' -%}
                {%- endif -%}
              {%- endfor -%}
            </div>
            {%- if block.settings.quote != blank -%}
              <p class="text-foreground-muted italic">"{{ block.settings.quote }}"</p>
            {%- endif -%}
          </div>
          <div class="mt-6">
            {%- if block.settings.author != blank -%}
              <p class="font-bold text-foreground">{{ block.settings.author }}</p>
            {%- endif -%}
            {%- if block.settings.source != blank -%}
              <p class="text-sm text-foreground-muted">{{ block.settings.source }}</p>
            {%- endif -%}
          </div>
        </div>
      {%- endfor -%}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Custom Social Proof",
  "tag": "section",
  "class": "custom-social-proof-section",
  "settings": [
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "label": "Color Scheme",
      "default": "scheme-2"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Trusted by Music Lovers"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "Testimonial",
      "limit": 6,
      "settings": [
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "label": "Rating",
          "default": 5
        },
        {
          "type": "textarea",
          "id": "quote",
          "label": "Quote",
          "default": "This is the best open-ear headphone I have ever used. The sound is incredible!"
        },
        {
          "type": "text",
          "id": "author",
          "label": "Author",
          "default": "Alex Doe"
        },
        {
          "type": "text",
          "id": "source",
          "label": "Source",
          "default": "Verified Buyer"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Custom Social Proof"
    }
  ]
}
{% endschema %}
