{%- liquid
  assign section_dom_id = 'comparison-' | append: section.id
-%}
<section id="{{ section.settings.section_id | default: 'comparison' }}" class="color-scheme color-{{ section.settings.color_scheme | default: 'scheme-1' }} bg-background" data-section-id="{{ section.id }}" data-section-type="custom-comparison">
  <style>
    /* Scoped styles */
    #{{ section_dom_id }} table { width: 100%; border-collapse: collapse; }
    #{{ section_dom_id }} thead th { font-weight: 600; }
    #{{ section_dom_id }} th, #{{ section_dom_id }} td { border-bottom: 1px solid var(--color-border); }
  </style>

  <div id="{{ section_dom_id }}" class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-12 sm:py-16 lg:py-20">
    <div class="text-center space-y-4 mb-8">
      {%- if section.settings.heading != blank -%}
        <h2 class="text-3xl sm:text-4xl font-bold tracking-tight text-foreground">{{ section.settings.heading | escape }}</h2>
      {%- endif -%}
      {%- if section.settings.subheading != blank -%}
        <div class="text-lg text-muted max-w-2xl mx-auto">{{ section.settings.subheading }}</div>
      {%- endif -%}
    </div>

    {%- if section.blocks.size > 0 -%}
      <div class="overflow-x-auto bg-surface rounded-xl shadow-sm">
        <table aria-describedby="{{ section_dom_id }}-caption" class="text-sm md:text-base">
          <caption id="{{ section_dom_id }}-caption" class="sr-only">{{ section.settings.heading | default: 'Comparison' }}</caption>
          <thead class="text-muted">
            <tr>
              <th scope="col" class="px-4 py-3 text-left w-1/3">{{ section.settings.feature_col_label | default: 'Feature' }}</th>
              <th scope="col" class="px-4 py-3 text-left">{{ section.settings.col1_title | default: 'OWS Pro' | escape }}</th>
              <th scope="col" class="px-4 py-3 text-left">{{ section.settings.col2_title | default: 'OWS 2' | escape }}</th>
              {%- if section.settings.enable_col3 -%}
                <th scope="col" class="px-4 py-3 text-left">{{ section.settings.col3_title | default: 'OWS 1' | escape }}</th>
              {%- endif -%}
            </tr>
          </thead>
          <tbody class="text-foreground">
            {%- for block in section.blocks -%}
              {%- if block.type == 'row' -%}
                <tr {{ block.shopify_attributes }}>
                  <th scope="row" class="px-4 py-4 align-top font-medium">{{ block.settings.label | default: 'Feature' | escape }}</th>
                  <td class="px-4 py-4 align-top">
                    {%- case block.settings.format -%}
                      {%- when 'check' -%} <span aria-label="Yes">✓</span>
                      {%- when 'cross' -%} <span aria-label="No">✕</span>
                      {%- else -%} {{ block.settings.col1_value | default: '-' | escape }}
                    {%- endcase -%}
                  </td>
                  <td class="px-4 py-4 align-top">
                    {%- case block.settings.format -%}
                      {%- when 'check' -%} <span aria-label="Yes">✓</span>
                      {%- when 'cross' -%} <span aria-label="No">✕</span>
                      {%- else -%} {{ block.settings.col2_value | default: '-' | escape }}
                    {%- endcase -%}
                  </td>
                  {%- if section.settings.enable_col3 -%}
                    <td class="px-4 py-4 align-top">
                      {%- case block.settings.format -%}
                        {%- when 'check' -%} <span aria-label="Yes">✓</span>
                        {%- when 'cross' -%} <span aria-label="No">✕</span>
                        {%- else -%} {{ block.settings.col3_value | default: '-' | escape }}
                      {%- endcase -%}
                    </td>
                  {%- endif -%}
                </tr>
              {%- endif -%}
            {%- endfor -%}
          </tbody>
        </table>
      </div>
    {%- endif -%}
  </div>
</section>

{% schema %}
{
  "name": "C: Comparison",
  "settings": [
    { "type": "color_scheme", "id": "color_scheme", "label": "Color scheme", "default": "scheme-1" },
    { "type": "text", "id": "section_id", "label": "Section ID", "default": "comparison" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "Find Your Perfect Fit" },
    { "type": "richtext", "id": "subheading", "label": "Subheading", "default": "<p>Compare our lineup to discover which Oladance model matches your lifestyle</p>" },
    { "type": "text", "id": "feature_col_label", "label": "Feature column label", "default": "Feature" },
    { "type": "text", "id": "col1_title", "label": "Column 1 title", "default": "OWS Pro" },
    { "type": "text", "id": "col2_title", "label": "Column 2 title", "default": "OWS 2" },
    { "type": "checkbox", "id": "enable_col3", "label": "Enable column 3", "default": true },
    { "type": "text", "id": "col3_title", "label": "Column 3 title", "default": "OWS 1" }
  ],
  "blocks": [
    {
      "type": "row",
      "name": "Row",
      "settings": [
        { "type": "text", "id": "label", "label": "Feature label", "default": "Battery life" },
        { "type": "select", "id": "format", "label": "Value format", "default": "text", "options": [
          { "value": "text", "label": "Text" },
          { "value": "check", "label": "Check (all columns)" },
          { "value": "cross", "label": "Cross (all columns)" }
        ] },
        { "type": "text", "id": "col1_value", "label": "Column 1 value", "default": "Up to 16h" },
        { "type": "text", "id": "col2_value", "label": "Column 2 value", "default": "Up to 12h" },
        { "type": "text", "id": "col3_value", "label": "Column 3 value", "default": "Up to 10h" }
      ]
    }
  ],
  "presets": [
    { "name": "C: Comparison" }
  ]
}
{% endschema %}
