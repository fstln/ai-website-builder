function s(){document.querySelector("[data-cart-icon]"),document.querySelector("[data-cart-count]");const t=document.querySelector("[data-cart-form]");t&&m(t),document.addEventListener("submit",async o=>{o.target.matches("[data-product-form]")&&(o.preventDefault(),await u(o.target))}),document.addEventListener("click",async o=>{const e=o.target.closest("[data-cart-remove]");if(e){o.preventDefault();const r=e.dataset.cartRemove;await l(r)}})}async function u(t){const o=new FormData(t);try{const e=await fetch("/cart/add.js",{method:"POST",body:o});if(!e.ok)throw new Error("Failed to add to cart");const r=await e.json();return await f(),d("Item added to cart"),r}catch(e){console.error("Add to cart error:",e),d("Failed to add item. Please try again.","error")}}async function l(t){try{if(!(await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,quantity:0})})).ok)throw new Error("Failed to remove from cart");window.location.reload()}catch(o){console.error("Remove from cart error:",o),d("Failed to remove item. Please try again.","error")}}function m(t){t.querySelectorAll("[data-quantity-input]").forEach(e=>{e.addEventListener("change",()=>{var r;(r=t.querySelector('[name="update"]'))==null||r.click()})})}async function f(){try{const o=await(await fetch("/cart.js")).json();document.querySelectorAll("[data-cart-count]").forEach(r=>{r.textContent=o.item_count})}catch(t){console.error("Update cart count error:",t)}}function d(t,o="success"){const e=document.createElement("div");e.className=`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${o==="error"?"bg-red-600":"bg-green-600"} text-white`,e.textContent=t,document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}function y(){document.querySelectorAll("[data-product-form]").forEach(o=>{p(o)})}function p(t){t.querySelectorAll('select[name^="options"]').forEach(e=>{e.addEventListener("change",()=>{i(t)})}),i(t)}function i(t){Array.from(t.querySelectorAll('select[name^="options"]')).map(r=>r.value);const o=t.querySelector('input[name="id"]'),e=t.querySelector('button[type="submit"]');e&&o&&(e.disabled=!o.value)}if(typeof customElements<"u"){class t extends HTMLElement{connectedCallback(){this.render(),this.attachEventListeners()}render(){const e=this.dataset.product;if(e)try{const r=JSON.parse(e)}catch(r){console.error("Error rendering product card:",r)}}attachEventListeners(){const e=this.querySelector("[data-add-to-cart]");e&&e.addEventListener("click",r=>{r.preventDefault(),this.handleAddToCart()})}async handleAddToCart(){const e=this.dataset.productId,r=this.dataset.quantity||1;try{if(!(await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:parseInt(r)})})).ok)throw new Error("Failed to add to cart");this.dispatchEvent(new CustomEvent("product-added-to-cart",{bubbles:!0,detail:{productId:e,quantity:r}}))}catch(n){console.error("Add to cart error:",n)}}}customElements.get("product-card")||customElements.define("product-card",t)}function h(){v(),E(),w()}function v(){const t=document.querySelector("[data-mobile-menu-toggle]"),o=document.querySelector("[data-mobile-close]"),e=document.querySelector("[data-mobile-drawer]"),r=document.querySelector("[data-mobile-backdrop]");if(!t||!e)return;const n=()=>{e.hidden=!1,t.setAttribute("aria-expanded","true"),document.body.style.overflow="hidden",setTimeout(()=>{o&&o.focus()},100)},a=()=>{e.hidden=!0,t.setAttribute("aria-expanded","false"),document.body.style.overflow="",t.focus()};t.addEventListener("click",n),o&&o.addEventListener("click",a),r&&r.addEventListener("click",a),document.addEventListener("keydown",c=>{c.key==="Escape"&&!e.hidden&&a()}),e.querySelectorAll("a").forEach(c=>{c.addEventListener("click",()=>{setTimeout(a,150)})})}function E(){const t=document.querySelector("[data-header]");if(!t)return;let o=!1;const e=()=>{window.scrollY>50?t.classList.add("is-scrolled"):t.classList.remove("is-scrolled"),o=!1};window.addEventListener("scroll",()=>{o||(window.requestAnimationFrame(e),o=!0)},{passive:!0}),e()}function w(){document.querySelector("[data-cart-count]")&&document.addEventListener("cart:updated",o=>{const{itemCount:e}=o.detail;C(e)})}function C(t){document.querySelectorAll("[data-cart-count]").forEach(e=>{e.textContent=t,e.style.display=t>0?"flex":"none",t>0&&(e.style.animation="none",setTimeout(()=>{e.style.animation="cartCountPulse 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},10))})}if(typeof document<"u"&&!document.querySelector("#cart-count-animation")){const t=document.createElement("style");t.id="cart-count-animation",t.textContent=`
    @keyframes cartCountPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.15); }
    }
  `,document.head.appendChild(t)}document.addEventListener("DOMContentLoaded",()=>{console.log("Minimal Shopify Theme loaded"),s(),y(),h(),document.addEventListener("product-added-to-cart",t=>{console.log("Product added to cart:",t.detail)})});
