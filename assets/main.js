function l(){document.querySelector("[data-cart-icon]"),document.querySelector("[data-cart-count]");const t=document.querySelector("[data-cart-form]");t&&f(t),document.addEventListener("submit",async o=>{o.target.matches("[data-product-form]")&&(o.preventDefault(),await u(o.target))}),document.addEventListener("click",async o=>{const e=o.target.closest("[data-cart-remove]");if(e){o.preventDefault();const n=e.dataset.cartRemove;await m(n)}})}async function u(t){const o=new FormData(t);try{const e=await fetch("/cart/add.js",{method:"POST",body:o});if(!e.ok)throw new Error("Failed to add to cart");const n=await e.json();return await p(),a("Item added to cart"),n}catch(e){console.error("Add to cart error:",e),a("Failed to add item. Please try again.","error")}}async function m(t){try{if(!(await fetch("/cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:t,quantity:0})})).ok)throw new Error("Failed to remove from cart");window.location.reload()}catch(o){console.error("Remove from cart error:",o),a("Failed to remove item. Please try again.","error")}}function f(t){t.querySelectorAll("[data-quantity-input]").forEach(e=>{e.addEventListener("change",()=>{var n;(n=t.querySelector('[name="update"]'))==null||n.click()})})}async function p(){try{const o=await(await fetch("/cart.js")).json();document.querySelectorAll("[data-cart-count]").forEach(n=>{n.textContent=o.item_count})}catch(t){console.error("Update cart count error:",t)}}function a(t,o="success"){const e=document.createElement("div");e.className=`fixed top-4 right-4 px-6 py-3 rounded-lg shadow-lg z-50 ${o==="error"?"bg-red-600":"bg-green-600"} text-white`,e.textContent=t,document.body.appendChild(e),setTimeout(()=>{e.remove()},3e3)}function h(){document.querySelectorAll("[data-product-form]").forEach(o=>{y(o)})}function y(t){t.querySelectorAll('select[name^="options"]').forEach(e=>{e.addEventListener("change",()=>{d(t)})}),d(t)}function d(t){Array.from(t.querySelectorAll('select[name^="options"]')).map(n=>n.value);const o=t.querySelector('input[name="id"]'),e=t.querySelector('button[type="submit"]');e&&o&&(e.disabled=!o.value)}if(typeof customElements<"u"){class t extends HTMLElement{connectedCallback(){this.render(),this.attachEventListeners()}render(){const e=this.dataset.product;if(e)try{const n=JSON.parse(e)}catch(n){console.error("Error rendering product card:",n)}}attachEventListeners(){const e=this.querySelector("[data-add-to-cart]");e&&e.addEventListener("click",n=>{n.preventDefault(),this.handleAddToCart()})}async handleAddToCart(){const e=this.dataset.productId,n=this.dataset.quantity||1;try{if(!(await fetch("/cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:parseInt(n)})})).ok)throw new Error("Failed to add to cart");this.dispatchEvent(new CustomEvent("product-added-to-cart",{bubbles:!0,detail:{productId:e,quantity:n}}))}catch(r){console.error("Add to cart error:",r)}}}customElements.get("product-card")||customElements.define("product-card",t)}function v(){const t=document.querySelector("[data-mobile-menu-toggle]"),o=document.querySelector("[data-mobile-nav]");t&&o&&(t.addEventListener("click",()=>{w(o)}),document.addEventListener("click",e=>{!e.target.closest("[data-mobile-menu-toggle]")&&!e.target.closest("[data-mobile-nav]")&&c(o)}),document.addEventListener("keydown",e=>{e.key==="Escape"&&c(o)})),g(),S()}function w(t){t.classList.contains("hidden")?E(t):c(t)}function E(t){t.classList.remove("hidden"),document.body.style.overflow="hidden",requestAnimationFrame(()=>{t.classList.add("active")})}function c(t){t.classList.remove("active"),t.classList.add("hidden"),document.body.style.overflow=""}function g(){document.querySelectorAll("[data-dropdown-trigger]").forEach(o=>{const e=o.nextElementSibling;e&&(window.matchMedia("(min-width: 768px)").matches?(o.addEventListener("mouseenter",()=>{s(e)}),o.parentElement.addEventListener("mouseleave",()=>{i(e)})):o.addEventListener("click",n=>{n.preventDefault(),L(e)}))})}function s(t){t.classList.remove("hidden"),t.classList.add("active")}function i(t){t.classList.remove("active"),t.classList.add("hidden")}function L(t){t.classList.contains("hidden")?s(t):i(t)}function S(){const t=document.querySelector(".site-header");if(!t)return;let o=window.scrollY,e=!1;const n=()=>{const r=window.scrollY;r>100?t.classList.add("scrolled"):t.classList.remove("scrolled"),r>o&&r>200?t.classList.add("header-hidden"):t.classList.remove("header-hidden"),o=r,e=!1};window.addEventListener("scroll",()=>{e||(window.requestAnimationFrame(n),e=!0)})}document.addEventListener("DOMContentLoaded",()=>{console.log("Minimal Shopify Theme loaded"),l(),h(),v(),document.addEventListener("product-added-to-cart",t=>{console.log("Product added to cart:",t.detail)})});
